(function(t,e){if(typeof define=="function"&&define.amd){define("ev-emitter/ev-emitter",e)}else if(typeof module=="object"&&module.exports){module.exports=e()}else{t.EvEmitter=e()}})(typeof window!="undefined"?window:this,function(){"use strict";function t(){}var e=t.prototype;e.on=function(t,e){if(!t||!e){return}var i=this._events=this._events||{};var n=i[t]=i[t]||[];if(n.indexOf(e)==-1){n.push(e)}return this};e.once=function(t,e){if(!t||!e){return}this.on(t,e);var i=this._onceEvents=this._onceEvents||{};var n=i[t]=i[t]||{};n[e]=true;return this};e.off=function(t,e){var i=this._events&&this._events[t];if(!i||!i.length){return}var n=i.indexOf(e);if(n!=-1){i.splice(n,1)}return this};e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(!i||!i.length){return}i=i.slice(0);e=e||[];var n=this._onceEvents&&this._onceEvents[t];for(var o=0;o<i.length;o++){var s=i[o];var r=n&&n[s];if(r){this.off(t,s);delete n[s]}s.apply(this,e)}return this};e.allOff=function(){delete this._events;delete this._onceEvents};return t});
(function(e,i){if(typeof define=="function"&&define.amd){define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(t){return i(e,t)})}else if(typeof module=="object"&&module.exports){module.exports=i(e,require("ev-emitter"))}else{e.Unipointer=i(e,e.EvEmitter)}})(window,function t(o,e){"use strict";function i(){}function n(){}var s=n.prototype=Object.create(e.prototype);s.bindStartEvent=function(t){this._bindStartEvent(t,true)};s.unbindStartEvent=function(t){this._bindStartEvent(t,false)};s._bindStartEvent=function(t,e){e=e===undefined?true:e;var i=e?"addEventListener":"removeEventListener";var n="mousedown";if(o.PointerEvent){n="pointerdown"}else if("ontouchstart"in o){n="touchstart"}t[i](n,this)};s.handleEvent=function(t){var e="on"+t.type;if(this[e]){this[e](t)}};s.getTouch=function(t){for(var e=0;e<t.length;e++){var i=t[e];if(i.identifier==this.pointerIdentifier){return i}}};s.onmousedown=function(t){var e=t.button;if(e&&(e!==0&&e!==1)){return}this._pointerDown(t,t)};s.ontouchstart=function(t){this._pointerDown(t,t.changedTouches[0])};s.onpointerdown=function(t){this._pointerDown(t,t)};s._pointerDown=function(t,e){if(t.button||this.isPointerDown){return}this.isPointerDown=true;this.pointerIdentifier=e.pointerId!==undefined?e.pointerId:e.identifier;this.pointerDown(t,e)};s.pointerDown=function(t,e){this._bindPostStartEvents(t);this.emitEvent("pointerDown",[t,e])};var r={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};s._bindPostStartEvents=function(t){if(!t){return}var e=r[t.type];e.forEach(function(t){o.addEventListener(t,this)},this);this._boundPointerEvents=e};s._unbindPostStartEvents=function(){if(!this._boundPointerEvents){return}this._boundPointerEvents.forEach(function(t){o.removeEventListener(t,this)},this);delete this._boundPointerEvents};s.onmousemove=function(t){this._pointerMove(t,t)};s.onpointermove=function(t){if(t.pointerId==this.pointerIdentifier){this._pointerMove(t,t)}};s.ontouchmove=function(t){var e=this.getTouch(t.changedTouches);if(e){this._pointerMove(t,e)}};s._pointerMove=function(t,e){this.pointerMove(t,e)};s.pointerMove=function(t,e){this.emitEvent("pointerMove",[t,e])};s.onmouseup=function(t){this._pointerUp(t,t)};s.onpointerup=function(t){if(t.pointerId==this.pointerIdentifier){this._pointerUp(t,t)}};s.ontouchend=function(t){var e=this.getTouch(t.changedTouches);if(e){this._pointerUp(t,e)}};s._pointerUp=function(t,e){this._pointerDone();this.pointerUp(t,e)};s.pointerUp=function(t,e){this.emitEvent("pointerUp",[t,e])};s._pointerDone=function(){this._pointerReset();this._unbindPostStartEvents();this.pointerDone()};s._pointerReset=function(){this.isPointerDown=false;delete this.pointerIdentifier};s.pointerDone=i;s.onpointercancel=function(t){if(t.pointerId==this.pointerIdentifier){this._pointerCancel(t,t)}};s.ontouchcancel=function(t){var e=this.getTouch(t.changedTouches);if(e){this._pointerCancel(t,e)}};s._pointerCancel=function(t,e){this._pointerDone();this.pointerCancel(t,e)};s.pointerCancel=function(t,e){this.emitEvent("pointerCancel",[t,e])};n.getPointerPoint=function(t){return{x:t.pageX,y:t.pageY}};return n});
(function(i,n){if(typeof define=="function"&&define.amd){define(["ev-emitter/ev-emitter","unipointer/unipointer"],function(t,e){return n(i,t,e)})}else if(typeof module=="object"&&module.exports){module.exports=n(i,require("ev-emitter"),require("unipointer"))}else{i.Huebee=n(i,i.EvEmitter,i.Unipointer)}})(window,function t(e,i,n){function s(t,e){t=C(t);if(!t){throw new Error("Bad element for Huebee: "+t)}this.anchor=t;this.options={};this.option(s.defaults);this.option(e);this.create()}s.defaults={hues:12,hue0:0,shades:5,saturations:3,notation:"shortHex",setText:true,setBGColor:true};var o=s.prototype=Object.create(i.prototype);o.option=function(t){this.options=b(this.options,t)};var r=0;var a={};o.create=function(){var t=this.guid=++r;this.anchor.huebeeGUID=t;a[t]=this;this.setBGElems=this.getSetElems(this.options.setBGColor);this.setTextElems=this.getSetElems(this.options.setText);this.outsideCloseIt=this.outsideClose.bind(this);this.onDocKeydown=this.docKeydown.bind(this);this.closeIt=this.close.bind(this);this.openIt=this.open.bind(this);this.onElemTransitionend=this.elemTransitionend.bind(this);this.isInputAnchor=this.anchor.nodeName=="INPUT";if(!this.options.staticOpen){this.anchor.addEventListener("click",this.openIt);this.anchor.addEventListener("focus",this.openIt)}if(this.isInputAnchor){this.anchor.addEventListener("input",this.inputInput.bind(this))}var e=this.element=document.createElement("div");e.className="huebee ";e.className+=this.options.staticOpen?"is-static-open ":"is-hidden ";e.className+=this.options.className||"";var i=this.container=document.createElement("div");i.className="huebee__container";function n(t){if(t.target==i){t.preventDefault()}}i.addEventListener("mousedown",n);i.addEventListener("touchstart",n);this.createCanvas();this.cursor=document.createElement("div");this.cursor.className="huebee__cursor is-hidden";i.appendChild(this.cursor);this.createCloseButton();e.appendChild(i);if(!this.options.staticOpen){var o=getComputedStyle(this.anchor.parentNode);if(o.position!="relative"&&o.position!="absolute"){this.anchor.parentNode.style.position="relative"}}var s=this.getCustomLength();this.satY=s?Math.ceil(s/this.options.hues)+1:0;this.updateColors();this.setAnchorColor();if(this.options.staticOpen){this.open()}};o.getSetElems=function(t){if(t===true){return[this.anchor]}else if(typeof t=="string"){return document.querySelectorAll(t)}};o.getCustomLength=function(){var t=this.options.customColors;return t&&t.length||0};o.createCanvas=function(){var t=this.canvas=document.createElement("canvas");t.className="huebee__canvas";this.ctx=t.getContext("2d");var e=this.canvasPointer=new n;e._bindStartEvent(t);e.on("pointerDown",this.canvasPointerDown.bind(this));e.on("pointerMove",this.canvasPointerMove.bind(this));this.container.appendChild(t)};var h="http://www.w3.org/2000/svg";o.createCloseButton=function(){if(this.options.staticOpen){return}var t=document.createElementNS(h,"svg");t.setAttribute("class","huebee__close-button");t.setAttribute("viewBox","0 0 24 24");t.setAttribute("width","24");t.setAttribute("height","24");var e=document.createElementNS(h,"path");e.setAttribute("d","M 7,7 L 17,17 M 17,7 L 7,17");e.setAttribute("class","huebee__close-button__x");t.appendChild(e);t.addEventListener("click",this.closeIt);this.container.appendChild(t)};o.updateColors=function(){this.swatches={};this.colorGrid={};this.updateColorModer();var t=this.options.shades;var e=this.options.saturations;var o=this.options.hues;if(this.getCustomLength()){var s=0;this.options.customColors.forEach(function(t){var e=s%o;var i=Math.floor(s/o);var n=E(t);if(n){this.addSwatch(n,e,i);s++}}.bind(this))}var i;for(i=0;i<e;i++){var n=1-i/e;var r=t*i+this.satY;this.updateSaturationGrid(i,n,r)}var a=this.getGrayCount();for(i=0;i<a;i++){var h=1-i/(t+1);var u=this.colorModer(0,0,h);var c=E(u);this.addSwatch(c,o+1,i)}};o.getGrayCount=function(){return this.options.shades?this.options.shades+2:0};o.updateSaturationGrid=function(t,e,i){var n=this.options.shades;var o=this.options.hues;var s=this.options.hue0;for(var r=0;r<n;r++){for(var a=0;a<o;a++){var h=Math.round(a*360/o+s)%360;var u=1-(r+1)/(n+1);var c=this.colorModer(h,e,u);var f=E(c);var d=r+i;this.addSwatch(f,a,d)}}};o.addSwatch=function(t,e,i){this.swatches[e+","+i]=t;this.colorGrid[t.color.toUpperCase()]={x:e,y:i}};var u={hsl:function(t,e,i){e=Math.round(e*100);i=Math.round(i*100);return"hsl("+t+", "+e+"%, "+i+"%)"},hex:w,shortHex:function(t,e,i){var n=w(t,e,i);return x(n)}};o.updateColorModer=function(){this.colorModer=u[this.options.notation]||u.shortHex};o.renderColors=function(){var t=this.gridSize*2;for(var e in this.swatches){var i=this.swatches[e];var n=e.split(",");var o=n[0];var s=n[1];this.ctx.fillStyle=i.color;this.ctx.fillRect(o*t,s*t,t,t)}};o.setAnchorColor=function(){if(this.isInputAnchor){this.setColor(this.anchor.value)}};var c=document.documentElement;o.open=function(){if(this.isOpen){return}var t=this.anchor;var e=this.element;if(!this.options.staticOpen){e.style.left=t.offsetLeft+"px";e.style.top=t.offsetTop+t.offsetHeight+"px"}this.bindOpenEvents(true);e.removeEventListener("transitionend",this.onElemTransitionend);t.parentNode.insertBefore(e,t.nextSibling);var i=getComputedStyle(e).transitionDuration;this.hasTransition=i&&i!="none"&&parseFloat(i);this.isOpen=true;this.updateSizes();this.renderColors();this.setAnchorColor();var n=e.offsetHeight;e.classList.remove("is-hidden")};o.bindOpenEvents=function(t){if(this.options.staticOpen){return}var e=(t?"add":"remove")+"EventListener";c[e]("mousedown",this.outsideCloseIt);c[e]("touchstart",this.outsideCloseIt);document[e]("focusin",this.outsideCloseIt);document[e]("keydown",this.onDocKeydown);this.anchor[e]("blur",this.closeIt)};o.updateSizes=function(){var t=this.options.hues;var e=this.options.shades;var i=this.options.saturations;var n=this.getGrayCount();var o=this.getCustomLength();this.cursorBorder=parseInt(getComputedStyle(this.cursor).borderTopWidth,10);this.gridSize=Math.round(this.cursor.offsetWidth-this.cursorBorder*2);this.canvasOffset={x:this.canvas.offsetLeft,y:this.canvas.offsetTop};var s,r;if(o&&!n){s=Math.min(o,t);r=Math.ceil(o/t)}else{s=t+2;r=Math.max(e*i+this.satY,n)}var a=this.canvas.width=s*this.gridSize*2;this.canvas.height=r*this.gridSize*2;this.canvas.style.width=a/2+"px"};o.outsideClose=function(t){var e=this.anchor.contains(t.target);var i=this.element.contains(t.target);if(!e&&!i){this.close()}};var f={13:true,27:true};o.docKeydown=function(t){if(f[t.keyCode]){this.close()}};var d=typeof c.style.transform=="string";o.close=function(){if(!this.isOpen){return}if(d&&this.hasTransition){this.element.addEventListener("transitionend",this.onElemTransitionend)}else{this.remove()}this.element.classList.add("is-hidden");this.bindOpenEvents(false);this.isOpen=false};o.remove=function(){var t=this.element.parentNode;if(t.contains(this.element)){t.removeChild(this.element)}};o.elemTransitionend=function(t){if(t.target!=this.element){return}this.element.removeEventListener("transitionend",this.onElemTransitionend);this.remove()};o.inputInput=function(){this.setColor(this.anchor.value)};o.canvasPointerDown=function(t,e){t.preventDefault();this.updateOffset();this.canvasPointerChange(e)};o.updateOffset=function(){var t=this.canvas.getBoundingClientRect();this.offset={x:t.left+e.pageXOffset,y:t.top+e.pageYOffset}};o.canvasPointerMove=function(t,e){this.canvasPointerChange(e)};o.canvasPointerChange=function(t){var e=Math.round(t.pageX-this.offset.x);var i=Math.round(t.pageY-this.offset.y);var n=this.gridSize;var o=Math.floor(e/n);var s=Math.floor(i/n);var r=this.swatches[o+","+s];this.setSwatch(r)};o.setColor=function(t){var e=E(t);this.setSwatch(e)};o.setSwatch=function(t){var e=t&&t.color;if(!t){return}var i=e==this.color;this.color=e;this.hue=t.hue;this.sat=t.sat;this.lum=t.lum;var n=this.lum-Math.cos((this.hue+70)/180*Math.PI)*.15;this.isLight=n>.5;var o=this.colorGrid[e.toUpperCase()];this.updateCursor(o);this.setTexts();this.setBackgrounds();if(!i){this.emitEvent("change",[e,t.hue,t.sat,t.lum])}};o.setTexts=function(){if(!this.setTextElems){return}for(var t=0;t<this.setTextElems.length;t++){var e=this.setTextElems[t];var i=e.nodeName=="INPUT"?"value":"textContent";e[i]=this.color}};o.setBackgrounds=function(){if(!this.setBGElems){return}var t=this.isLight?"#222":"white";for(var e=0;e<this.setBGElems.length;e++){var i=this.setBGElems[e];i.style.backgroundColor=this.color;i.style.color=t}};o.updateCursor=function(t){if(!this.isOpen){return}var e=t?"remove":"add";this.cursor.classList[e]("is-hidden");if(!t){return}var i=this.gridSize;var n=this.canvasOffset;var o=this.cursorBorder;this.cursor.style.left=t.x*i+n.x-o+"px";this.cursor.style.top=t.y*i+n.y-o+"px"};var v=e.console;function p(){var t=document.querySelectorAll("[data-huebee]");for(var e=0;e<t.length;e++){var i=t[e];var n=i.getAttribute("data-huebee");var o;try{o=n&&JSON.parse(n)}catch(t){if(v){v.error("Error parsing data-huebee on "+i.className+": "+t)}continue}new s(i,o)}}var l=document.readyState;if(l=="complete"||l=="interactive"){p()}else{document.addEventListener("DOMContentLoaded",p)}s.data=function(t){t=C(t);var e=t&&t.huebeeGUID;return e&&a[e]};var m=document.createElement("canvas");m.width=m.height=1;var g=m.getContext("2d");function E(t){g.clearRect(0,0,1,1);g.fillStyle="#010203";g.fillStyle=t;g.fillRect(0,0,1,1);var e=g.getImageData(0,0,1,1).data;e=[e[0],e[1],e[2],e[3]];if(e.join(",")=="1,2,3,255"){return}var i=y.apply(this,e);return{color:t.trim(),hue:i[0],sat:i[1],lum:i[2]}}function b(t,e){for(var i in e){t[i]=e[i]}return t}function C(t){if(typeof t=="string"){t=document.querySelector(t)}return t}function w(t,e,i){var n=_(t,e,i);return S(n)}function _(t,e,i){var n=(1-Math.abs(2*i-1))*e;var o=t/60;var s=n*(1-Math.abs(o%2-1));var r,a;switch(Math.floor(o)){case 0:r=[n,s,0];break;case 1:r=[s,n,0];break;case 2:r=[0,n,s];break;case 3:r=[0,s,n];break;case 4:r=[s,0,n];break;case 5:r=[n,0,s];break;default:r=[0,0,0]}a=i-n/2;r=r.map(function(t){return t+a});return r}function y(t,e,i){t/=255;e/=255;i/=255;var n=Math.max(t,e,i);var o=Math.min(t,e,i);var s=n-o;var r=.5*(n+o);var a=s===0?0:s/(1-Math.abs(2*r-1));var h;if(s===0){h=0}else if(n===t){h=(e-i)/s%6}else if(n===e){h=(i-t)/s+2}else if(n===i){h=(t-e)/s+4}var u=60*h;return[u,parseFloat(a),parseFloat(r)]}function S(t){var e=t.map(function(t){t=Math.round(t*255);var e=t.toString(16).toUpperCase();e=e.length<2?"0"+e:e;return e});return"#"+e.join("")}function x(t){return"#"+t[1]+t[3]+t[5]}return s});
(function(q,u,c){function v(a,b,g){a.addEventListener?a.addEventListener(b,g,!1):a.attachEvent("on"+b,g)}function z(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);a.shiftKey||(b=b.toLowerCase());return b}return n[a.which]?n[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function F(a){var b=[];a.shiftKey&&b.push("shift");a.altKey&&b.push("alt");a.ctrlKey&&b.push("ctrl");a.metaKey&&b.push("meta");return b}function w(a){return"shift"==a||"ctrl"==a||"alt"==a||
"meta"==a}function A(a,b){var g,d=[];var e=a;"+"===e?e=["+"]:(e=e.replace(/\+{2}/g,"+plus"),e=e.split("+"));for(g=0;g<e.length;++g){var m=e[g];B[m]&&(m=B[m]);b&&"keypress"!=b&&C[m]&&(m=C[m],d.push("shift"));w(m)&&d.push(m)}e=m;g=b;if(!g){if(!p){p={};for(var c in n)95<c&&112>c||n.hasOwnProperty(c)&&(p[n[c]]=c)}g=p[e]?"keydown":"keypress"}"keypress"==g&&d.length&&(g="keydown");return{key:m,modifiers:d,action:g}}function D(a,b){return null===a||a===u?!1:a===b?!0:D(a.parentNode,b)}function d(a){function b(a){a=
a||{};var b=!1,l;for(l in p)a[l]?b=!0:p[l]=0;b||(x=!1)}function g(a,b,t,f,g,d){var l,E=[],h=t.type;if(!k._callbacks[a])return[];"keyup"==h&&w(a)&&(b=[a]);for(l=0;l<k._callbacks[a].length;++l){var c=k._callbacks[a][l];if((f||!c.seq||p[c.seq]==c.level)&&h==c.action){var e;(e="keypress"==h&&!t.metaKey&&!t.ctrlKey)||(e=c.modifiers,e=b.sort().join(",")===e.sort().join(","));e&&(e=f&&c.seq==f&&c.level==d,(!f&&c.combo==g||e)&&k._callbacks[a].splice(l,1),E.push(c))}}return E}function c(a,b,c,f){k.stopCallback(b,
b.target||b.srcElement,c,f)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function e(a){"number"!==typeof a.which&&(a.which=a.keyCode);var b=z(a);b&&("keyup"==a.type&&y===b?y=!1:k.handleKey(b,F(a),a))}function m(a,g,t,f){function h(c){return function(){x=c;++p[a];clearTimeout(q);q=setTimeout(b,1E3)}}function l(g){c(t,g,a);"keyup"!==f&&(y=z(g));setTimeout(b,10)}for(var d=p[a]=0;d<g.length;++d){var e=d+1===g.length?l:h(f||
A(g[d+1]).action);n(g[d],e,f,a,d)}}function n(a,b,c,f,d){k._directMap[a+":"+c]=b;a=a.replace(/\s+/g," ");var e=a.split(" ");1<e.length?m(a,e,b,c):(c=A(a,c),k._callbacks[c.key]=k._callbacks[c.key]||[],g(c.key,c.modifiers,{type:c.action},f,a,d),k._callbacks[c.key][f?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:f,level:d,combo:a}))}var k=this;a=a||u;if(!(k instanceof d))return new d(a);k.target=a;k._callbacks={};k._directMap={};var p={},q,y=!1,r=!1,x=!1;k._handleKey=function(a,
d,e){var f=g(a,d,e),h;d={};var k=0,l=!1;for(h=0;h<f.length;++h)f[h].seq&&(k=Math.max(k,f[h].level));for(h=0;h<f.length;++h)f[h].seq?f[h].level==k&&(l=!0,d[f[h].seq]=1,c(f[h].callback,e,f[h].combo,f[h].seq)):l||c(f[h].callback,e,f[h].combo);f="keypress"==e.type&&r;e.type!=x||w(a)||f||b(d);r=l&&"keydown"==e.type};k._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)n(a[d],b,c)};v(a,"keypress",e);v(a,"keydown",e);v(a,"keyup",e)}if(q){var n={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",
18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},C={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},B={option:"alt",command:"meta","return":"enter",
escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},p;for(c=1;20>c;++c)n[111+c]="f"+c;for(c=0;9>=c;++c)n[c+96]=c.toString();d.prototype.bind=function(a,b,c){a=a instanceof Array?a:[a];this._bindMultiple.call(this,a,b,c);return this};d.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)};d.prototype.trigger=function(a,b){if(this._directMap[a+":"+b])this._directMap[a+":"+b]({},a);return this};d.prototype.reset=function(){this._callbacks={};
this._directMap={};return this};d.prototype.stopCallback=function(a,b){if(-1<(" "+b.className+" ").indexOf(" mousetrap ")||D(b,this.target))return!1;if("composedPath"in a&&"function"===typeof a.composedPath){var c=a.composedPath()[0];c!==a.target&&(b=c)}return"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable};d.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};d.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(n[b]=a[b]);p=null};
d.init=function(){var a=d(u),b;for(b in a)"_"!==b.charAt(0)&&(d[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b))};d.init();q.Mousetrap=d;"undefined"!==typeof module&&module.exports&&(module.exports=d);"function"===typeof define&&define.amd&&define(function(){return d})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null);