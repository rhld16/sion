const speed=7,friction=.98;var players={},coins={};const gameSize=2500,playerSize=100,coinSize=50;function checkCollision(e,a){return Math.abs(e.x-a.x)<=playerSize&&Math.abs(e.y-a.y)<=playerSize}function respawn(e){e.x=Math.floor(Math.random()*Number(6e3)-100)+10,e.y=Math.floor(Math.random()*Number(gameSize)-100)+10}function isValidPosition(e,a,o){if(e.x<0||e.x+playerSize>6e3)return!1;if(e.y<0||e.y+playerSize>gameSize)return!1;var i=!1;return Object.keys(players).forEach(o=>{if(o!=a){var r=players[o];return checkCollision(r,e)?(i=!0,players[a].score++,void respawn(r)):void 0}}),!i}function shuffleCoin(){for(var e=Math.floor(Math.random()*Number(6e3)-100)+10,a=Math.floor(Math.random()*Number(gameSize)-100)+10;!isValidPosition({x:e,y:a},"_coin");)this.navigator||(e=Math.floor(Math.random()*Number(gameSize)-100)+10,a=Math.floor(Math.random()*Number(gameSize)-100)+10);coins.x=e,coins.y=a}function movePlayer(e,a){var o=players[e];if(o){var i={x:o.x+o.accel.x,y:o.y+o.accel.y};a[38]&&o.accel.y>-speed&&o.accel.y--,a[40]&&o.accel.y<speed&&o.accel.y++,a[39]&&o.accel.x<speed&&o.accel.x++,a[37]&&o.accel.x>-speed&&o.accel.x--,o.accel.y*=friction,i.y+=o.accel.y,o.accel.x*=friction,i.x+=o.accel.x,isValidPosition(i,e)?(o.x=i.x,o.y=i.y):(o.accel.x=0,o.accel.y=0),checkCollision(o,coins)&&(o.score++,shuffleCoin())}}function stringToColour(e){for(var a=0,o=0;o<e.length;o++)a=e.charCodeAt(o)+((a<<5)-a);var i="#";for(o=0;o<3;o++){i+=("00"+(a>>8*o&255).toString(16)).substr(-2)}return i}this.navigator||(module.exports={players:players,stringToColour:stringToColour,movePlayer:movePlayer,playerSize:playerSize,gameSize:gameSize,isValidPosition:isValidPosition,coins:coins,shuffleCoin:shuffleCoin});